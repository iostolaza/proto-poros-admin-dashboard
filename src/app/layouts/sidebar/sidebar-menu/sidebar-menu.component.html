<!-- Top-level menu with groups, items, tooltips, matching lannodev. -->
<!-- References: lannodev repo https://github.com/lannodev/angular-tailwind/blob/main/src/app/modules/layout/components/sidebar/sidebar-menu.component.html -->

<div *ngFor="let menu of menuService.pagesMenu">
  <div *ngIf="menuService.showSideBar" class="mx-1 flex items-center justify-between py-3">
    <small class="text-muted-foreground/50 text-xs font-semibold">
      {{ menu.group }}
    </small>
  </div>
  <ul class="flex flex-col">
    <li *ngFor="let item of menu.items">
      <div
        (click)="toggleMenu(item)"
        [ngClass]="{
          'hover:bg-primary/10': !menuService.showSideBar && item.active,
          'hover:bg-card/50': !menuService.showSideBar
        }"
        class="text-muted-foreground hover:text-foreground group relative flex grow items-center gap-4 rounded-lg px-2"
      >
        <div [ngClass]="item.active && !menuService.showSideBar ? 'text-primary' : 'text-muted-foreground/50'">
          <svg-icon [src]="item.icon" [svgClass]="'h-5 w-5'"></svg-icon>
        </div>
        <ng-container
          [ngTemplateOutlet]="item.children ? childMenu : parentMenu"
          [ngTemplateOutletContext]="{ item: item }"
        ></ng-container>
        <ng-template #parentMenu let-item="item">
          <a
            [routerLink]="item.route"
            routerLinkActive="text-primary"
            class="text-muted-foreground hover:text-primary flex h-9 cursor-pointer items-center justify-start rounded-sm truncate text-xs font-semibold tracking-wide"
            [ngClass]="{ hidden: !menuService.showSideBar }"
          >
            {{ item.label }}
          </a>
        </ng-template>
        <ng-template #childMenu let-item="item">
          <span
            class="text-muted-foreground group-hover:text-primary flex h-9 cursor-pointer items-center justify-start rounded-sm truncate text-xs font-semibold tracking-wide"
            [ngClass]="{ hidden: !menuService.showSideBar }"
          >
            {{ item.label }}
          </span>
        </ng-template>
        <button
          *ngIf="item.children"
          [ngClass]="{ hidden: !menuService.showSideBar }"
          class="text-foreground/50 flex cursor-pointer items-center justify-end p-0 transition-all duration-500"
        >
          <svg-icon
            [src]="!item.expanded ? '/assets/icons/lucide/plus.svg' : '/assets/icons/lucide/minus.svg'"
            [svgClass]="'h-4 w-4'"
          ></svg-icon>
        </button>
        <div *ngIf="!menuService.showSideBar" class="z-10 fixed h-9">
          <span
            class="bg-foreground text-background absolute w-auto min-w-max translate-y-1 scale-0 rounded-md p-2 text-xs font-bold shadow-md transition-all duration-200 group-hover:scale-100 ltr:origin-left ltr:translate-x-10 rtl:origin-right rtl:-translate-x-10"
          >
            {{ item.label }}
          </span>
        </div>
      </div>
      <app-sidebar-submenu [submenu]="item"></app-sidebar-submenu>
    </li>
  </ul>
  <div *ngIf="menu.separator" class="py-3">
    <hr class="border-border border-dashed" />
  </div>
</div>